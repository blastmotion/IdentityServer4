machine:
  services:
    - docker

dependencies:
  pre:
    # - [[ -d ~/docker ]] || mkdir ~/docker
    # - sudo apt-get update
    # - sudo apt-get install mono-complete

  cache_directories:
    - "~/docker"
  override:
    - docker info
    - docker pull microsoft/dotnet

test:
  override:
    # - docker run -it --name dotnet -v ~/IdentityServer4:/IdentityServer4 microsoft/dotnet env TERM=xterm bash -c "cd /IdentityServer4/" && dotnet run && echo $?
    - cd ~/IdentityServer4
    - docker build -t IdentityServer4 .
    - docker run IdentityServer4
